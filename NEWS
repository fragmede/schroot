NEWS                                                             -*- outline -*-
----

Welcome to schroot 0.2.9.  Please read these release notes carefully.

Full installation instructions are provided in the INSTALL file.  The
README file also contains more specific notes regarding building and
configuration.

* Major changes in 0.2.9:

  1) The package now compiles with older compilers, such as GCC 3.3
     and 3.4.

  2) If the current working directory does not exist inside the
     chroot, the user's home directory ($HOME, home directory in
     passwd, or /) will be used when running a login shell.  If
     running a command and the directory does not exist, schroot will
     exit with an error.

* Major changes in 0.2.8:

  Bugfixes only.

* Major changes in 0.2.7:

  Bugfixes only.

* Major changes in 0.2.6:

  1) For all chroot types, a "command-prefix" option has been added.
     This is a command to prefix to all commands run inside the
     chroot.

  2) The scripts run before and after executing a command or shell in
     the chroot have been moved from /etc/schroot/run.d to
     /etc/schroot/exec.d.  The corresponding configuration option in
     schroot.conf has been renamed from "run-session-scripts" to
     "run-exec-scripts".  This change was to reduce ambiguity in the
     naming, to make it easier to understand and configure.

  3) The session operations "--recover-session", "--run-session", and
     "--end-session" now allow multiple chroots to be specified with
     "--chroot", rather than just one.

  4) The "file" and "lvm-snapshot" chroot types both implement "source
     chroots", to provide access to the source block device and
     archive file, respectively.  The "source-groups" and
     "source-root-groups" options have been added to set the "groups"
     and "root-groups" options for the source chroot.

  5) The "file" chroot, when accessed as a source chroot using the
     "-source" suffix, will now automatically repack itself into a new
     archive file on ending a session.

* Major changes in 0.2.5:

  1) The output of "--info" now displays a "Path" line if available.
     This is the location of the chroot in the filesystem.

* Major changes in 0.2.4:

  1) For "block-device" and "lvm-snapshot" type chroots, it is now
     possible to add a "location" configuration option to specify the
     location of the chroot within the device filesystem, rather than
     assuming the location is always the root.  This allows multiple
     chroots to be stored on a single LVM LV, for example.

  2) For "plain" chroots, if setup scripts (run-setup-scripts) is
     enabled, session management is also enabled.  This is not true
     session management, because it uses bind mounts rather than a
     copy of the chroot, so should be used with caution, but will make
     concurrent access to the chroot with session scripts enabled
     rather more useful.

* Major changes in 0.2.3:

  1) A dchroot compatibility mode has been implemented.  This behaves
     in the same manner as the dchroot program, and is useful for
     backward compatibility with dhchroot, as well as migrating from
     dchroot.

  2) Access to the source device of an "lvm-snapshot" type chroot is
     simplified.  For a chroot named "snap", a "block-device" type
     chroot named "snap-source" is created for easy access to the
     source device.

  3) The output of "--info" now includes a "Session Managed" line,
     which is true if full session management is available, or false
     otherwise.

* Major changes in 0.2.2:

  1) Session metadata is now correctly saved and restored.

  2) New option "--config" to dump chroot configuration, in the same
     manner as "--info".  This is useful to test if the configuration
     you put in schroot.conf is what schroot is actually parsing.

  3) Session-managed chroot types ("file" and "lvm-snapshot") now run
     setup and session scripts by default.  It was previously disabled
     for all chroot types for safety reasons.  It's considered safe
     for these types due to their ephemeral nature.

* Major changes in 0.2.1:

  1) Creating a session now returns a zero exit status on success.

* Major changes in 0.2.0:

  1) A new chroot type, "file", has been added, to allow chroots to be
     created by unpacking a file archive, such as a tar or zip file.

  2) The source has been rewritten in C++, and documented with
     Doxygen.

  3) A testsuite has been added to unit test as much functionality as
     is reasonably possible.

* Major changes in 0.1.7:

  1) The chroots now implement locking to restrict access to chroots
     which are already in use.

  2) The "current-users" and "max-users" configuration options have
     been removed.  These have been obsoleted by chroot locking.

  3) The command-line options "--all-chroots" and "--all-sessions"
     have been added, which have similar behaviour to "--all", but
     selects all chroots and all active sessions, respectively.

  4) Session creation, use and removal is now available for LVM
     snapshot chroots, using the options documented in schroot(1).

  5) The session commands also work with non-session-based chroot
     types (plain and block-device), but is equivalent to using the
     chroot normally.

  6) An init script is used to recover (restore) session chroots at
     system startup.

  7) If no chroot is specified, schroot will fall back to using the
     "default" chroot.  Adding a "default" alias to an existing chroot
     will make this chroot the default.

* Major changes in 0.1.6:

  1) Setup scripts may be run on startup and shutdown and before and
     after a command in order to perform setup tasks such as
     configuring the chroot and mounting filesystems.  These are
     stored in /etc/schroot/setup.d and /etc/schroot/run.d, and run
     using run-parts(8).  New scripts may easily be added by the
     system administrator.  See schroot-setup(5).

  2) Different types of chroots are now supported.  The current types
     are "plain" (the default, which is the type supported by previous
     releases), "block-device" (a block device mounted on the fly) and
     "lvm-snapshot" (and LVM snapshot of an LV made on the fly).

* Major changes in 0.1.5:

  1) The authentication system has been extended to remove the
     dependency upon libpam_misc.  There are no user-visible changes.

  2) The root user (uid 0) no longer has special priveleges during
     authentication.  If the root user should have special priveleges
     (such as not requiring authentication to change to any other
     user), do the following:

     - uncomment the pam_rootok.so line in pam.d/schroot.  This will
       disable the requirement for root authentication.
     - add root to groups (root_groups membership is redundant), so
       that root is allowed access.

  3) The configuration file, /etc/schroot.conf has been moved to
     /etc/schroot/schroot.conf.  This should be moved automatically
     when upgrading the Debian package.

  4) A new directory, /etc/schroot/setup.d has been added.  This
     contains scripts to perform setup and cleanup tasks in the
     chroot, which are run with run-parts(8).  This provides an
     easy was to configure and customise chroots.

* Major changes in 0.1.4:

  1) A new chroot configuration option, "priority", has been added.
     This is intended for use with sbuild, to indicate whether the
     distribution in a chroot is older than the distribution in
     another chroot.
  2) The printed messages displaying the command or shell being run
     now correctly inform the user if the shell is a login shell or
     not.

* Major changes in 0.1.3:

  1) HOME, LOGNAME and USER are set in the environment if the old
     environment is not being preserved.
  2) schroot now aborts earlier if no chroots are defined in
     schroot.conf, rather than failing with a confusing failed
     assertion error.
  3) An option parsing bug which could sometimes cause a crash has
     been fixed.

* Major changes in 0.1.2:

  1) Support for gettext has been added, to allow localisation into
     any language.
  2) If a command is specified, it will be searched for in $PATH.
     Previously, an absolute path was always required.

* Major changes in 0.1.1:

  1) Add a large number of pointer checks.

* Major changes in 0.1.0:

  1) Initial release.
  2) Debian packaging created.
