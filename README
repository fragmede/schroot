schroot
-------

Securely enter a chroot and run a command or login shell.

Build Dependencies
------------------
libpam0g-dev
libglib2.0-dev
A C99 C compiler

Building and installation
-------------------------

Please see the INSTALL file for generic installation instructions.

Configuration
-------------

See schroot.conf(5).

Running
-------

See schroot(1).

$ ./schroot -l
default
etch
sid
testing
unstable

$ ./schroot -i -c sid
Name: sid
Description: Debian unstable
Location: /srv/chroot/sid
Groups: sbuild
Root Groups: root
Aliases: unstable default

(use --all or -c multiple times to use multiple chroots)

$ ./schroot -c sid /bin/ls
** (schroot:13021): DEBUG: session uid = 1000, gid = 1000

PAM authentication succeeded for user rleigh
Running session in sid chroot:
** (schroot:13022): DEBUG: Running command: /bin/ls
#README#         sbuild-chroot.h  sbuild-config.h   sbuild-session.h  schroot.c
Makefile         sbuild-chroot.o  sbuild-config.o   sbuild-session.o  schroot.o
sbuild-chroot.c  sbuild-config.c  sbuild-session.c  schroot           test.conf

$ ./schroot -c sid -u root
** (schroot:13031): DEBUG: session uid = 1000, gid = 1000

** (schroot:13031): DEBUG: session uid = 0, gid = 0

Password:
PAM authentication succeeded for user root
Running session in sid chroot:
** (schroot:13032): DEBUG: Running login shell: /bin/bash

(if I was in root-groups in test.conf, I would be granted root access
without authentication, but the PAM authorisation step is still
applied; see sbuild_session_run() in sbuild-session.c).
