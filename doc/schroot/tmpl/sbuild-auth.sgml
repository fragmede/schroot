<!-- ##### SECTION Title ##### -->
SbuildAuth

<!-- ##### SECTION Short_Description ##### -->


<!-- ##### SECTION Long_Description ##### -->
<para>

</para>

<!-- ##### SECTION See_Also ##### -->
<para>

</para>

<!-- ##### SECTION Stability_Level ##### -->


<!-- ##### ENUM SbuildAuthError ##### -->
<para>
The errors which can occur while loading a configuration file.
</para>

@SBUILD_AUTH_ERROR_PAM_STARTUP: PAM startup failed.
@SBUILD_AUTH_ERROR_PAM_SET_ITEM: PAM failed to set a configuration item.
@SBUILD_AUTH_ERROR_HOSTNAME: The system hostname could not be resolved.
@SBUILD_AUTH_ERROR_PAM_AUTHENTICATE: PAM user authentication failed.
@SBUILD_AUTH_ERROR_PAM_PUTENV: PAM failed to set an environment variable.
@SBUILD_AUTH_ERROR_PAM_ACCOUNT: PAM user authorisation failed.
@SBUILD_AUTH_ERROR_PAM_CREDENTIALS: PAM failed to establish the user's credentials.
@SBUILD_AUTH_ERROR_PAM_SESSION_OPEN: PAM failed to open a session.
@SBUILD_AUTH_ERROR_PAM_SESSION_CLOSE: PAM failed to close a session.
@SBUILD_AUTH_ERROR_PAM_DELETE_CREDENTIALS: PAM failed to delete the user's credentials.
@SBUILD_AUTH_ERROR_PAM_SHUTDOWN: PAM shutdown failed.

<!-- ##### MACRO SBUILD_AUTH_ERROR ##### -->
<para>
The error domain for sbuild authentication errors.
</para>



<!-- ##### STRUCT SbuildAuth ##### -->
<para>
SbuildAuth object.
</para>


<!-- ##### SIGNAL SbuildAuth::require-auth ##### -->
<para>
Check if authentication is required.  Each registered handler is run
in turn until all have run, or one returns SBUILD_AUTH_STATUS_FAIL.
</para>

@sbuildauth: the object which received the signal.
@Returns: An SbuildAuthStatus to indicate whether authentication is
not required, required, or if it has already failed.

<!-- ##### SIGNAL SbuildAuth::session-run ##### -->
<para>
Run a session.  Each registered session handler is run in turn.
</para>

@sbuildauth: the object which received the signal.
@arg1: A GError.
@Returns: TRUE to continue running session handlers, FALSE to abort on
error (@error must be set appropriately).

<!-- ##### ARG SbuildAuth:command ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:environment ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:gid ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:home ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:quiet ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:ruid ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:ruser ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:service ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:shell ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:uid ##### -->
<para>

</para>

<!-- ##### ARG SbuildAuth:user ##### -->
<para>

</para>

<!-- ##### USER_FUNCTION SbuildAuthRequireAuthFunc ##### -->
<para>
The function prototype required for use with the require_auth virtual
function.
</para>

@auth: an #SbuildAuth
@Returns: An SbuildAuthStatus to indicate whether authentication is
not required, required, or if it has already failed.


<!-- ##### USER_FUNCTION SbuildAuthSessionRunFunc ##### -->
<para>
The function prototype required for use with the session_run virtual
function.
</para>

@auth: an #SbuildAuth
@error: a #GError
@Returns: TRUE to continue running session handlers, FALSE to abort on
error (@error must be set appropriately).


<!-- ##### STRUCT SbuildAuthClass ##### -->
<para>
SbuildAuth class.
</para>

@parent: the parent class
@require_auth: vfunc to check if authentication is required
@session_run: vfunc to run a session

<!-- ##### ENUM SbuildAuthStatus ##### -->
<para>
The status of the authentication process.
</para>

@SBUILD_AUTH_STATUS_NONE: No authentication is required.
@SBUILD_AUTH_STATUS_USER: User authentication is required.
@SBUILD_AUTH_STATUS_FAIL: Authentication has failed.

<!-- ##### FUNCTION sbuild_auth_new ##### -->
<para>

</para>

@Returns: 
<!-- # Unused Parameters # -->
@config: 
@chroots: 


<!-- ##### FUNCTION sbuild_auth_get_uid ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_gid ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_user ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_set_user ##### -->
<para>

</para>

@auth: 
@user: 


<!-- ##### FUNCTION sbuild_auth_get_home ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_shell ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_command ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_set_command ##### -->
<para>

</para>

@auth: 
@command: 


<!-- ##### FUNCTION sbuild_auth_get_environment ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_set_environment ##### -->
<para>

</para>

@auth: 
@environment: 


<!-- ##### FUNCTION sbuild_auth_get_pam_environment ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_ruid ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_ruser ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_get_quiet ##### -->
<para>

</para>

@auth: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_set_quiet ##### -->
<para>

</para>

@auth: 
@quiet: 


<!-- ##### FUNCTION sbuild_auth_start ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_stop ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_authenticate ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_account ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_cred_establish ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_cred_delete ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_open_session ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_close_session ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_setupenv ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 


<!-- ##### FUNCTION sbuild_auth_run ##### -->
<para>

</para>

@auth: 
@error: 
@Returns: 
<!-- # Unused Parameters # -->
@child_status: 


